<?xml version="1.0" encoding="utf-8" ?>
<!--
    Copyright (C) 2024 Compassion (http://www.compassion.ch)
    @author Jérémie Lang <jlang@compassion.ch>
    The licence is in the file __manifest__.py
-->
<odoo>
    <record id="view_account_move_form_inherited" model="ir.ui.view">
        <field name="name">account.move.form.inherited</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form" />
        <field name="arch" type="xml">
            <data>
                <field name="state" position="after">
                    <field name="is_gift_refundable" invisible="1" />
                </field>
                <xpath
          expr="//button[@name='action_reverse']"
          position="attributes"
        >
                    <attribute
            name="attrs"
          >{'invisible': ['|', ('is_gift_refundable', '=', False), '|',
                                                           ('move_type', 'not in', ('out_invoice', 'in_invoice')),
                                                           ('state', '!=', 'posted')]}</attribute>
                </xpath>
                <xpath
          expr="//button[@name='button_draft']"
          position="attributes"
        >
                    <attribute
            name="attrs"
          >{'invisible': ['|', ('is_gift_refundable', '=', False),
                                                           ('show_reset_to_draft_button', '=', False)]}</attribute>
                </xpath>
            </data>
        </field>
    </record>
</odoo>
