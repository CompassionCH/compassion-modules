=================================
CMS Form additions for Compassion
=================================

.. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge2| image:: https://img.shields.io/badge/github-CompassionCH%2Fcompassion--modules-lightgray.png?logo=github
    :target: https://github.com/CompassionCH/compassion-modules/tree/10.0/cms_form_compassion
    :alt: CompassionCH/compassion-modules

|badge1| |badge2| 

This module adds some generic forms and form widgets to the module cms_form. It adds:

- A form that can match the partner given address or create a new one if no one is found.
- A form that can redirect to payment
- Ability to display forms in modal dialogs
- Hidden widgets
- Payment widgets

**Table of contents**

.. contents::
   :local:

Configuration
=============

The payment routes should work with several payment acquirers, however it was only tested with
Stripe and Postfinance. Others acquirers may not work or require adaptations.

To make sure the payment routes are working, at least one payment acquirer should be activated
in the Accounting settings.

Usage
=====

The payment adds several routes for redirecting to payment providers after a form submission.

One route is /compassion/payment/<invoice_id> that can contain
following GET parameters:

* accept_url: the redirection url after successful payment
* decline_url: the redirection url after declined payment

The redirection page is /compassion/payment/validate

If no accept_url and decline_url were passed, it will render the default confirmation page,
otherwise it will redirect the user accordingly.

The second route is /compassion/payment/<transaction_id> and is similar to the first one,
except that one can use a transaction id instead of an invoice. The transaction should however
be connected to an invoice otherwise it will display an error.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/CompassionCH/compassion-modules/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us smashing it by providing a detailed and welcomed
`feedback <https://github.com/CompassionCH/compassion-modules/issues/new?body=module:%20cms_form_compassion%0Aversion:%2010.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
~~~~~~~

* Compassion CH

Contributors
~~~~~~~~~~~~

* Emanuel Cino <ecino@compassion.ch>
* Beno√Æt Schopfer <bschopfer@compassion.ch>

Maintainers
~~~~~~~~~~~

This module is maintained by Compassion Switzerland.

.. image:: https://upload.wikimedia.org/wikipedia/en/8/83/CompassionInternationalLogo.png
   :alt: Compassion Switzerland
   :target: https://www.compassion.ch

Compassion Switzerland is a nonprofit organization whose
mission is to release children from extreme poverty in Jesus name.

This module is part of the `CompassionCH/compassion-modules <https://github.com/CompassionCH/compassion-modules/tree/10.0/cms_form_compassion>`_ project on GitHub.
